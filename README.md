# Agent6 Rebuilt - åŠ¡å®é‡æ„ç‰ˆ

**ç‰ˆæœ¬**: v6.6.0 Rebuilt
**æ—¥æœŸ**: 2025å¹´12æœˆ12æ—¥

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

Agent6 Rebuilt æ˜¯åŸºäºN8å“²å­¦æ€æƒ³å¯¹åŸAgent6ç³»ç»Ÿçš„åŠ¡å®é‡æ„ç‰ˆæœ¬ã€‚é‡‡ç”¨**å•è¿›ç¨‹æ¶æ„**,å½»åº•è§£å†³äº†åŸç³»ç»Ÿçš„çŠ¶æ€éš”ç¦»é—®é¢˜,å®ç°äº†æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

1. **å•è¿›ç¨‹æ¶æ„** - å½»åº•è§£å†³èŠå¤©å®¤ç™½å±é—®é¢˜
2. **15ä¸ªå·¥å…·** - å®Œæ•´ä¿ç•™æ‰€æœ‰å·¥å…·åŠŸèƒ½
3. **LangGraphå·¥ä½œæµ** - æ¨¡å—åŒ–çš„Agentæ¨ç†å¼•æ“
4. **åå°æœåŠ¡** - SystemMonitor + TaskScheduler
5. **ç®¡ç†é¢æ¿** - å®Œæ•´çš„ç³»ç»Ÿç›‘æ§API
6. **èŠå¤©å®¤** - SSEæµå¼å¯¹è¯,æ”¯æŒä¸Šä¸‹æ–‡ç›‘æ§
7. **å¯é…ç½®ä¸Šä¸‹æ–‡** - æ”¯æŒè‡ªå®šä¹‰ä¸Šä¸‹æ–‡é•¿åº¦å’Œå‹ç¼©é˜ˆå€¼

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
agent6_rebuilt/
â”œâ”€â”€ main.py                 # ä¸»å…¥å£æ–‡ä»¶(å•è¿›ç¨‹FastAPIåº”ç”¨)
â”œâ”€â”€ requirements.txt        # Pythonä¾èµ–
â”œâ”€â”€ deploy.sh              # éƒ¨ç½²è„šæœ¬
â””â”€â”€ app/
    â”œâ”€â”€ config.py          # ç»Ÿä¸€é…ç½®
    â”œâ”€â”€ state.py           # å…¨å±€çŠ¶æ€ç®¡ç†å™¨(å•ä¾‹)
    â”œâ”€â”€ api/               # APIè·¯ç”±
    â”‚   â”œâ”€â”€ chat.py        # èŠå¤©å®¤API
    â”‚   â””â”€â”€ dashboard.py   # ç®¡ç†é¢æ¿API
    â”œâ”€â”€ workflow/          # LangGraphå·¥ä½œæµ
    â”‚   â””â”€â”€ graph.py
    â”œâ”€â”€ tools/             # 15ä¸ªå·¥å…·
    â”‚   â””â”€â”€ __init__.py    # å·¥å…·æ± åŠ è½½å™¨
    â””â”€â”€ services/          # åå°æœåŠ¡
        â”œâ”€â”€ monitor.py     # ç³»ç»Ÿç›‘æ§
        â””â”€â”€ scheduler.py   # å®šæ—¶ä»»åŠ¡è°ƒåº¦
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip3 install -r requirements.txt
```

### 2. é…ç½®

ç¼–è¾‘ `app/config.py` ä¿®æ”¹é…ç½®:

```python
# ä¸Šä¸‹æ–‡ç®¡ç†é…ç½®
MAX_CONTEXT_LENGTH = 200000  # æœ€å¤§ä¸Šä¸‹æ–‡é•¿åº¦
COMPRESSION_THRESHOLD = 0.85  # å‹ç¼©é˜ˆå€¼

# ç«¯å£é…ç½®
API_PORT = 8888
MODEL_PORT = 8000  # LM Studioç«¯å£
```

### 3. å¯åŠ¨

```bash
# æ–¹å¼1: ä½¿ç”¨éƒ¨ç½²è„šæœ¬
./deploy.sh

# æ–¹å¼2: ç›´æ¥å¯åŠ¨
python3 main.py
```

### 4. è®¿é—®

- **APIæ–‡æ¡£**: http://localhost:8888/docs
- **ç®¡ç†é¢æ¿**: http://localhost:8888/dashboard (å‰ç«¯éœ€å•ç‹¬éƒ¨ç½²)
- **èŠå¤©å®¤**: http://localhost:8888/chatroom (å‰ç«¯éœ€å•ç‹¬éƒ¨ç½²)

## ğŸ“Š APIç«¯ç‚¹

### åŸºç¡€ç«¯ç‚¹

- `GET /` - æ ¹è·¯å¾„
- `GET /health` - å¥åº·æ£€æŸ¥
- `GET /status` - ç³»ç»ŸçŠ¶æ€

### èŠå¤©å®¤API

- `POST /api/chat/stream` - SSEæµå¼èŠå¤©
- `GET /api/chat/health` - èŠå¤©å®¤å¥åº·æ£€æŸ¥
- `GET /api/chat/context_stats` - ä¸Šä¸‹æ–‡ç»Ÿè®¡

### ç®¡ç†é¢æ¿API

- `GET /api/dashboard/system_status` - ç³»ç»ŸçŠ¶æ€
- `GET /api/dashboard/tool_pool_status` - å·¥å…·æ± çŠ¶æ€
- `GET /api/dashboard/browser_pool_status` - æµè§ˆå™¨æ± çŠ¶æ€
- `GET /api/dashboard/performance_data` - æ€§èƒ½æ•°æ®
- `GET /api/dashboard/context_config` - ä¸Šä¸‹æ–‡é…ç½®
- `GET /api/dashboard/model_status` - æ¨¡å‹çŠ¶æ€

## ğŸ”§ å·²è§£å†³çš„é—®é¢˜

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|:---|:---|
| 1. æ¨¡å‹è·å–é”™è¯¯ | SystemMonitorä»8000ç«¯å£åŠ¨æ€è·å– |
| 2. æ—¶é—´æ˜¾ç¤ºUTC | Configå¼ºåˆ¶TZ=Asia/Shanghai |
| 3. å·¥å…·æ± åŠ è½½ | TaskSchedulerå¯åŠ¨5åˆ†é’Ÿå,æ¯30åˆ†é’Ÿæ£€æŸ¥ |
| 4. æ€§èƒ½æ£€æµ‹ | TaskSchedulerå¯åŠ¨20åˆ†é’Ÿå,æ¯30åˆ†é’Ÿæ‰§è¡Œ |
| 5. Dashboardç©ºæ•°æ® | StateManageræä¾›çœŸå®æ•°æ® |
| 6. èŠå¤©å®¤é»‘å± | å•è¿›ç¨‹æ¶æ„å½»åº•è§£å†³ |
| 7. universal_api Header | ä»£ç å·²æ”¯æŒ,æ— éœ€ä¿®æ”¹ |
| 8. ä¸Šä¸‹æ–‡ç›‘æ§å¯é…ç½® | Configä¸­å¯é…ç½® |

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: FastAPI + Uvicorn
- **Agentå¼•æ“**: LangGraph + LangChain
- **è°ƒåº¦**: APScheduler
- **HTTPå®¢æˆ·ç«¯**: httpx
- **å·¥å…·**: 15ä¸ªå®Œæ•´å·¥å…·(Webæœç´¢ã€æµè§ˆå™¨è‡ªåŠ¨åŒ–ã€ä»£ç æ‰§è¡Œç­‰)

## ğŸ“ å¼€å‘æ—¥å¿—

è¯¦è§ `/home/ubuntu/agent6_rebuild_log.md`

## ğŸ™ è‡´è°¢

åŸºäºN8å¹³å°çš„å“²å­¦æ€æƒ³è¿›è¡Œé‡æ„,é‡‡ç”¨åŠ¡å®çš„å•è¿›ç¨‹æ¶æ„,ä¿ç•™äº†æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ã€‚

---

**Manus AI** - 2025å¹´12æœˆ12æ—¥
