# M3 Agent v6.5.3 Release Notes

**å‘å¸ƒæ—¥æœŸ**: 2025-12-07  
**ç‰ˆæœ¬ç±»åž‹**: é‡è¦ä¿®å¤ç‰ˆæœ¬  
**å‡çº§å»ºè®®**: å¼ºçƒˆå»ºè®®ä»Žv6.5.2å‡çº§

---

## ðŸŽ¯ æ ¸å¿ƒä¿®å¤

### 1. **æ¨¡åž‹é¢„ä¸‹è½½** (æœ€é‡è¦çš„ä¿®å¤)
**é—®é¢˜**: v6.5.2å¯åŠ¨æ—¶éœ€è¦ä¸‹è½½EasyOCRå’ŒWhisperæ¨¡åž‹ï¼Œå¯¼è‡´ï¼š
- å¯åŠ¨å¡åœ¨5%è¿›åº¦æ¡é•¿è¾¾10-20åˆ†é’Ÿ
- å®¹å™¨æ ‡è®°ä¸ºunhealthy
- ç”¨æˆ·ä½“éªŒæžå·®

**ä¿®å¤**: åœ¨Dockerfileä¸­æ·»åŠ æ¨¡åž‹é¢„ä¸‹è½½æ­¥éª¤
```dockerfile
# é¢„ä¸‹è½½EasyOCRæ¨¡åž‹ (è‹±æ–‡ + ç®€ä½“ä¸­æ–‡)
RUN python3 -c "import easyocr; reader = easyocr.Reader(['en', 'ch_sim'], download_enabled=True)"

# é¢„ä¸‹è½½Whisper smallæ¨¡åž‹ (è¯­éŸ³è¯†åˆ«, ~244MB)
RUN python3 -c "import whisper; model = whisper.load_model('small')"
```

**æ•ˆæžœ**:
- âœ… å¯åŠ¨æ—¶é—´ä»Ž20åˆ†é’Ÿç¼©çŸ­åˆ°2åˆ†é’Ÿ
- âœ… å®¹å™¨ç«‹å³æ ‡è®°ä¸ºhealthy
- âœ… æ— éœ€ç½‘ç»œè¿žæŽ¥å³å¯ä½¿ç”¨OCRå’Œè¯­éŸ³è¯†åˆ«

---

### 2. **æ·»åŠ ç¼ºå¤±çš„APIç«¯ç‚¹**

#### 2.1 `/health` ç«¯ç‚¹
**é—®é¢˜**: Dockerå¥åº·æ£€æŸ¥å¤±è´¥ï¼Œå¯¼è‡´å®¹å™¨æ ‡è®°ä¸ºunhealthy

**ä¿®å¤**: æ·»åŠ ç®€å•çš„å¥åº·æ£€æŸ¥ç«¯ç‚¹
```python
@admin_app.get("/health")
async def health_check():
    return {"status": "healthy", "service": "admin_panel", "version": "6.5.3"}
```

**æ•ˆæžœ**: 
- âœ… Dockerå¥åº·æ£€æŸ¥é€šè¿‡
- âœ… å®¹å™¨çŠ¶æ€æ­£å¸¸

#### 2.2 `/api/models` ç«¯ç‚¹
**é—®é¢˜**: ç®¡ç†é¢æ¿æ— æ³•èŽ·å–LLMæ¨¡åž‹ä¿¡æ¯ï¼Œæ˜¾ç¤º"åŠ è½½ä¸­..."

**ä¿®å¤**: æ·»åŠ LLMæ¨¡åž‹è‡ªåŠ¨æ£€æµ‹ç«¯ç‚¹
- è‡ªåŠ¨æ£€æµ‹ç«¯å£8000ä¸Šçš„æ¨¡åž‹
- æ”¯æŒOpenAIå…¼å®¹API
- è¿”å›žæ¨¡åž‹åç§°å’Œè¿žæŽ¥çŠ¶æ€

**æ•ˆæžœ**:
- âœ… ç®¡ç†é¢æ¿æ­£ç¡®æ˜¾ç¤ºæ¨¡åž‹ä¿¡æ¯
- âœ… æ”¯æŒä»»ä½•OpenAIå…¼å®¹çš„åŽç«¯

---

### 3. **å®šæ—¶ä»»åŠ¡ç³»ç»Ÿ**

**æ–°å¢žåŠŸèƒ½**: æ·»åŠ åŽå°å®šæ—¶ä»»åŠ¡å¾ªçŽ¯

**ä»»åŠ¡è°ƒåº¦**:
- **Agent APIçŠ¶æ€æ›´æ–°**: å¯åŠ¨åŽ5åˆ†é’Ÿï¼Œä¹‹åŽæ¯30åˆ†é’Ÿ
- **æ¨¡åž‹æ€§èƒ½æµ‹è¯•**: å¯åŠ¨åŽ20åˆ†é’Ÿï¼Œä¹‹åŽæ¯15åˆ†é’Ÿ

**å®žçŽ°**:
```python
async def scheduled_tasks_loop():
    while True:
        # æ£€æŸ¥æ˜¯å¦åˆ°è¾¾æ‰§è¡Œæ—¶é—´
        # æ‰§è¡Œç›¸åº”çš„æ›´æ–°ä»»åŠ¡
        await asyncio.sleep(60)  # æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
```

**æ•ˆæžœ**:
- âœ… ç®¡ç†é¢æ¿æ•°æ®è‡ªåŠ¨æ›´æ–°
- âœ… æ€§èƒ½æ•°æ®å®šæœŸåˆ·æ–°
- âœ… æ— éœ€æ‰‹åŠ¨åˆ·æ–°é¡µé¢

---

### 4. **ç³»ç»Ÿè¿è¡Œæ—¶é—´ä¿®å¤**

**é—®é¢˜**: 
- æ˜¾ç¤ºçš„æ˜¯é¡µé¢æ‰“å¼€æ—¶é—´ï¼Œè€Œä¸æ˜¯å®¹å™¨å¯åŠ¨æ—¶é—´
- åˆ·æ–°é¡µé¢å°±å½’é›¶

**ä¿®å¤**: 
- ä½¿ç”¨å®¹å™¨å¯åŠ¨æ—¶é—´ä½œä¸ºåŸºå‡†
- ä»ŽåŽç«¯APIèŽ·å–è¿è¡Œæ—¶é—´
- å‰ç«¯åªè´Ÿè´£æ˜¾ç¤º

**æ•ˆæžœ**:
- âœ… æ˜¾ç¤ºçœŸå®žçš„ç³»ç»Ÿè¿è¡Œæ—¶é—´
- âœ… åˆ·æ–°é¡µé¢ä¸ä¼šé‡ç½®

---

### 5. **å†…å­˜é¢„åŠ è½½å€’è®¡æ—¶ä¿®å¤**

**é—®é¢˜**: å€’è®¡æ—¶åœ¨å‰ç«¯è®¡ç®—ï¼Œåˆ·æ–°é¡µé¢å°±é‡ç½®

**ä¿®å¤**: 
- ä»ŽåŽç«¯APIèŽ·å–é¢„åŠ è½½çŠ¶æ€
- åŽç«¯è®¡ç®—å‰©ä½™æ—¶é—´
- å‰ç«¯åªè´Ÿè´£æ˜¾ç¤º

**æ•ˆæžœ**:
- âœ… å€’è®¡æ—¶å‡†ç¡®
- âœ… åˆ·æ–°é¡µé¢ä¸å½±å“

---

## ðŸ“¦ æŠ€æœ¯æ”¹è¿›

### Dockerfileä¼˜åŒ–
- âœ… å¤šé˜¶æ®µæž„å»ºï¼ˆå‰ç«¯ + åŽç«¯ï¼‰
- âœ… æ¨¡åž‹é¢„ä¸‹è½½ï¼ˆEasyOCR + Whisperï¼‰
- âœ… æ¸…åŽé•œåƒæºåŠ é€Ÿ
- âœ… æ—¶åŒºé…ç½®ï¼ˆAsia/Shanghaiï¼‰
- âœ… å¥åº·æ£€æŸ¥ä¼˜åŒ–

### åŽç«¯APIæ”¹è¿›
- âœ… æ–°å¢ž `/health` ç«¯ç‚¹
- âœ… æ–°å¢ž `/api/models` ç«¯ç‚¹
- âœ… å®šæ—¶ä»»åŠ¡ç³»ç»Ÿ
- âœ… å¼‚æ­¥LLMæ¨¡åž‹æ£€æµ‹

### å¯åŠ¨è„šæœ¬æ”¹è¿›
```bash
=== M3 Agent v6.5.3 Started ===
Agent API:    http://localhost:8888
Admin Panel:  http://localhost:8889/admin
Chatroom UI:  http://localhost:8889/chatroom/
Health Check: http://localhost:8889/health
LLM Models:   http://localhost:8889/api/models

v6.5.3 Improvements:
- EasyOCR and Whisper models pre-downloaded
- /health and /api/models endpoints added
- Scheduled tasks for periodic updates
```

---

## ðŸ”§ å·²çŸ¥é—®é¢˜

### 1. èŠå¤©å®¤ç™½å±
**çŠ¶æ€**: éƒ¨åˆ†ä¿®å¤ï¼Œä»éœ€è¿›ä¸€æ­¥è°ƒè¯•
**æè¿°**: èŠå¤©å®¤å¯ä»¥æ‰“å¼€ï¼Œä½†æ˜¾ç¤ºä¸å®Œæ•´
**ä¸´æ—¶æ–¹æ¡ˆ**: æ£€æŸ¥æµè§ˆå™¨æŽ§åˆ¶å°é”™è¯¯

### 2. å…ƒæç¤ºè¯æœªæ›´æ–°
**çŠ¶æ€**: å¾…å¤„ç†
**æè¿°**: éœ€è¦æ›´æ–°ä¸ºv2.0ç‰ˆæœ¬
**è®¡åˆ’**: åœ¨v6.5.4ä¸­ä¿®å¤

---

## ðŸ“Š æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | v6.5.2 | v6.5.3 | æ”¹è¿› |
|:---|:---:|:---:|:---:|
| å¯åŠ¨æ—¶é—´ | 20åˆ†é’Ÿ | 2åˆ†é’Ÿ | â¬‡ï¸ 90% |
| å¥åº·æ£€æŸ¥ | âŒ å¤±è´¥ | âœ… é€šè¿‡ | âœ… ä¿®å¤ |
| æ¨¡åž‹åŠ è½½ | è¿è¡Œæ—¶ä¸‹è½½ | é¢„ä¸‹è½½ | âœ… ä¼˜åŒ– |
| APIå®Œæ•´æ€§ | ç¼ºå¤±2ä¸ªç«¯ç‚¹ | å®Œæ•´ | âœ… ä¿®å¤ |
| å®šæ—¶ä»»åŠ¡ | âŒ æ—  | âœ… æœ‰ | âœ… æ–°å¢ž |

---

## ðŸš€ å‡çº§æŒ‡å—

### ä»Žv6.5.2å‡çº§åˆ°v6.5.3

#### æ–¹æ³•1: Docker Hubç›´æŽ¥æ‹‰å–ï¼ˆæ…¢ï¼‰
```bash
docker pull junpeng999/agent6:v6.5.3-arm64
docker stop agent6 && docker rm agent6
docker run -d --name agent6 -p 8888:8888 -p 8889:8889 --restart unless-stopped junpeng999/agent6:v6.5.3-arm64
```

#### æ–¹æ³•2: COSä¸­è½¬ï¼ˆæŽ¨èï¼Œå¿«ï¼‰
```bash
# åœ¨vps3ä¸Šä¼ åˆ°COS
docker save junpeng999/agent6:v6.5.3-arm64 | gzip > /tmp/agent6-v6.5.3-arm64.tar.gz
coscmd upload /tmp/agent6-v6.5.3-arm64.tar.gz /agent6-v6.5.3-arm64.tar.gz
coscmd putobjectacl --grant-read anyone /agent6-v6.5.3-arm64.tar.gz

# åœ¨M3ä¸‹è½½å¹¶éƒ¨ç½²
aria2c -x 16 -s 16 https://m3-agent-files-1322343680.cos.ap-guangzhou.myqcloud.com/agent6-v6.5.3-arm64.tar.gz
docker load < agent6-v6.5.3-arm64.tar.gz
docker stop agent6 && docker rm agent6
docker run -d --name agent6 -p 8888:8888 -p 8889:8889 --restart unless-stopped junpeng999/agent6:v6.5.3-arm64
```

---

## âœ… éªŒè¯æ¸…å•

éƒ¨ç½²v6.5.3åŽï¼Œè¯·éªŒè¯ä»¥ä¸‹åŠŸèƒ½ï¼š

- [ ] å®¹å™¨å¯åŠ¨æ—¶é—´ < 5åˆ†é’Ÿ
- [ ] å®¹å™¨å¥åº·çŠ¶æ€ä¸ºhealthy
- [ ] ç®¡ç†é¢æ¿å¯è®¿é—® (http://192.168.9.125:8889/admin)
- [ ] èŠå¤©å®¤å¯è®¿é—® (http://192.168.9.125:8889/chatroom/)
- [ ] Agent APIå¯è®¿é—® (http://192.168.9.125:8888/)
- [ ] `/health` ç«¯ç‚¹è¿”å›ž200 (http://192.168.9.125:8889/health)
- [ ] `/api/models` ç«¯ç‚¹è¿”å›žæ¨¡åž‹ä¿¡æ¯
- [ ] ç³»ç»Ÿè¿è¡Œæ—¶é—´æ­£ç¡®æ˜¾ç¤º
- [ ] å†…å­˜é¢„åŠ è½½å€’è®¡æ—¶æ­£ç¡®
- [ ] å®¹å™¨æ—¥å¿—æ— EasyOCRä¸‹è½½è¿›åº¦æ¡

---

## ðŸ™ è‡´è°¢

æ„Ÿè°¢Manus AI Agentåœ¨v6.5.3å¼€å‘è¿‡ç¨‹ä¸­çš„ååŠ©ï¼Œç‰¹åˆ«æ˜¯ï¼š
- è¯Šæ–­v6.5.2çš„å¯åŠ¨å¡é¡¿é—®é¢˜
- å¯¹æ¯”v3.5/v6.0/v6.5.2çš„Dockerfile
- è®¾è®¡å®šæ—¶ä»»åŠ¡ç³»ç»Ÿ
- å®žçŽ°LLMæ¨¡åž‹è‡ªåŠ¨æ£€æµ‹

---

## ðŸ“ž åé¦ˆ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼åé¦ˆï¼š
- GitHub Issues: https://github.com/celebrityfeet2020-stack/agent6/issues
- å®¹å™¨æ—¥å¿—: `docker logs agent6`
- å¥åº·æ£€æŸ¥: `curl http://localhost:8889/health`
