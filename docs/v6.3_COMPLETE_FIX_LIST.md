# A6 System v6.3 å®Œæ•´ä¿®å¤æ¸…å•

## ğŸ¯ ç›®æ ‡
ä¿®å¤æ‰€æœ‰v6.2é—ç•™é—®é¢˜,ç¡®ä¿ç”Ÿäº§ç¯å¢ƒå¯ç”¨,æ— è¿è¡Œæ—¶ä¸‹è½½,æ‰€æœ‰æ•°æ®çœŸå®å¯é ã€‚

---

## âœ… å·²ä¿®å¤é—®é¢˜

### 1. EasyOCRæ¨¡å‹è¿è¡Œæ—¶ä¸‹è½½ â­â­â­
**é—®é¢˜**: EasyOCRæ¨¡å‹åœ¨é¦–æ¬¡ä½¿ç”¨æ—¶ä¸‹è½½,å¯¼è‡´å¯åŠ¨å15åˆ†é’Ÿä»åœ¨ä¸‹è½½æ¨¡å‹
**å½±å“**: ä¸¥é‡å½±å“ç”¨æˆ·ä½“éªŒ,å·¥å…·æ± åˆå§‹åŒ–ç¼“æ…¢
**ä¿®å¤**: 
- åœ¨Dockerfileä¸­æ·»åŠ EasyOCRæ¨¡å‹é¢„ä¸‹è½½
- ä½¿ç”¨`easyocr.Reader(['en', 'ch_sim'], gpu=False)`é¢„åŠ è½½è‹±æ–‡å’Œç®€ä½“ä¸­æ–‡æ¨¡å‹
- æ¨¡å‹å¤§å°çº¦500MB,æ„å»ºæ—¶ä¸€æ¬¡æ€§ä¸‹è½½

**ä»£ç **:
```dockerfile
# 4. é¢„ä¸‹è½½EasyOCRæ¨¡å‹ (è‹±æ–‡+ç®€ä½“ä¸­æ–‡)
RUN python3 -c "import easyocr; reader = easyocr.Reader(['en', 'ch_sim'], gpu=False); print('EasyOCR models downloaded successfully!')"
```

### 2. ç‰ˆæœ¬å·æ˜¾ç¤ºé”™è¯¯
**é—®é¢˜**: 
- å¯åŠ¨è„šæœ¬æ˜¾ç¤º"v6.0"
- ç®¡ç†é¢æ¿æ ‡é¢˜æ˜¾ç¤º"v6.0"
- åº”è¯¥æ˜¾ç¤º"v6.2"

**ä¿®å¤**:
- âœ… Dockerfile start.sh: v6.0 â†’ v6.2
- âœ… backend/admin_ui/templates/dashboard.html: v6.0 â†’ v6.2 (æ‰€æœ‰å‡ºç°)

### 3. 15åˆ†é’Ÿæµè§ˆå™¨æ± åˆå§‹åŒ–éªŒè¯ âœ…
**çŠ¶æ€**: å·²éªŒè¯æˆåŠŸ
**æ—¥å¿—**:
```
13:14:59 - å¯åŠ¨å®Œæˆ
13:29:59 - ğŸŒŠ Wave 1: Browser Pool + Tool Pool + API Check
13:29:59 - âœ… Browser pool and 15 tools initialized successfully
```
**ç»“è®º**: å»¶è¿Ÿåˆå§‹åŒ–æœºåˆ¶å·¥ä½œæ­£å¸¸,ç²¾ç¡®15åˆ†é’Ÿ

---

## ğŸ”§ å¾…ä¿®å¤é—®é¢˜

### 4. èŠå¤©å®¤é¡µé¢ç©ºç™½ (CSS/JS 404) â­â­â­
**é—®é¢˜**: 
- è®¿é—® http://192.168.9.125:8889/chatroom/ æ˜¾ç¤ºç©ºç™½é¡µé¢
- æµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤ºCSS/JSæ–‡ä»¶404é”™è¯¯
- é”™è¯¯è·¯å¾„: `/assets/index-BdwokKsP.js` (åº”è¯¥æ˜¯ `/chatroom/assets/...`)

**æ ¹æœ¬åŸå› **:
- å‰ç«¯æ„å»ºæ—¶ä½¿ç”¨äº†ç»å¯¹è·¯å¾„ `/assets/`
- ä½†chatroomæŒ‚è½½åœ¨ `/chatroom/` å­è·¯å¾„ä¸‹
- StaticFilesæ— æ³•æ­£ç¡®å¤„ç†è¿™ç§è·¯å¾„ä¸åŒ¹é…

**è§£å†³æ–¹æ¡ˆ**:
1. **æ–¹æ¡ˆA (æ¨è)**: é‡æ–°æ„å»ºå‰ç«¯,è®¾ç½®`base: '/chatroom/'`
   ```javascript
   // vite.config.js
   export default defineConfig({
     base: '/chatroom/',
     // ...
   })
   ```

2. **æ–¹æ¡ˆB**: ä¿®æ”¹admin_app.py,æ·»åŠ è·¯å¾„é‡å†™ä¸­é—´ä»¶

**ä¼˜å…ˆçº§**: é«˜ (å½±å“ç”¨æˆ·ä½“éªŒ)

---

### 5. ç®¡ç†é¢æ¿APIç¼ºå¤± (404é”™è¯¯) â­â­â­
**é—®é¢˜**: ç®¡ç†é¢æ¿è¯·æ±‚ä»¥ä¸‹APIå…¨éƒ¨è¿”å›404
- `/api/dashboard/status`
- `/api/dashboard/preload-status`
- `/api/dashboard/health`
- `/api/dashboard/performance`

**å½±å“**: 
- ç®¡ç†é¢æ¿æ˜¾ç¤º"åŠ è½½ä¸­..."
- æ— æ³•æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
- æ— æ³•æŸ¥çœ‹æ€§èƒ½æ•°æ®
- ç”¨æˆ·ä½“éªŒæå·®

**æ ¹æœ¬åŸå› **: 
- dashboard.htmlä¸­çš„JavaScriptè°ƒç”¨äº†è¿™äº›API
- ä½†admin_app.pyä¸­æ²¡æœ‰å®ç°è¿™äº›ç«¯ç‚¹
- åªæœ‰ `/api/status` å’Œ `/api/prompts` æ˜¯å®ç°çš„

**éœ€è¦å®ç°çš„API**:

#### 5.1 `/api/dashboard/status` - ç³»ç»ŸçŠ¶æ€
```python
@admin_app.get("/api/dashboard/status")
async def get_dashboard_status():
    return {
        "uptime": ...,  # è¿è¡Œæ—¶é—´(ç§’)
        "started_at": ...,  # å¯åŠ¨æ—¶é—´(ISOæ ¼å¼)
        "overall_health": "healthy",  # healthy/degraded/error
    }
```

#### 5.2 `/api/dashboard/preload-status` - é¢„åŠ è½½çŠ¶æ€
```python
@admin_app.get("/api/dashboard/preload-status")
async def get_preload_status():
    return {
        "status": "completed",  # waiting/loading/completed
        "elapsed_time": 900,  # å·²ç­‰å¾…æ—¶é—´(ç§’)
        "target_time": 900,  # ç›®æ ‡æ—¶é—´(15åˆ†é’Ÿ=900ç§’)
    }
```

#### 5.3 `/api/dashboard/health` - å¥åº·æ£€æµ‹è¯¦æƒ…
```python
@admin_app.get("/api/dashboard/health")
async def get_health_details():
    return {
        "tools_count": 15,
        "tools_status": "healthy",
        "fleet_api": "healthy",
        "langgraph_api": "healthy",
        "llm_connection": "healthy",
    }
```

#### 5.4 `/api/dashboard/performance` - æ€§èƒ½æ•°æ®
```python
@admin_app.get("/api/dashboard/performance")
async def get_performance_data():
    return {
        "model": {
            "tokens_per_second": 22.37,
            "ttft_ms": 377.79,
            "total_latency_ms": 1500,
            "updated_at": "2025-12-05T13:30:00Z"
        },
        "api": {
            "avg_response_time_ms": 150,
            "total_requests": 1234,
            "success_rate": 99.5,
            "requests_per_hour": 120,
            "updated_at": "2025-12-05T13:30:00Z"
        }
    }
```

**ä¼˜å…ˆçº§**: é«˜ (ç®¡ç†é¢æ¿å®Œå…¨ä¸å¯ç”¨)

---

### 6. LLMæ¨¡å‹æ˜¾ç¤ºé”™è¯¯
**é—®é¢˜**: 
- ç®¡ç†é¢æ¿"å½“å‰æ¨¡å‹"æ˜¾ç¤º `minimax/minimax-m2`
- ä½†è¿™æ˜¯**é…ç½®çš„æ¨¡å‹**,ä¸æ˜¯**LLM APIå®é™…ä½¿ç”¨çš„æ¨¡å‹**
- åº”è¯¥ä»LLM APIçš„ `/v1/models` ç«¯ç‚¹è·å–çœŸå®æ¨¡å‹åˆ—è¡¨

**è§£å†³æ–¹æ¡ˆ**:
```python
@admin_app.get("/api/llm/models")
async def get_llm_models():
    try:
        async with httpx.AsyncClient() as client:
            response = await client.get(
                f"{LLM_BASE_URL}/models",
                timeout=10.0
            )
            models = response.json()
            return {
                "current_model": LLM_MODEL,  # é…ç½®çš„æ¨¡å‹
                "available_models": models.get("data", []),  # å®é™…å¯ç”¨æ¨¡å‹
            }
    except Exception as e:
        return {
            "error": str(e),
            "current_model": LLM_MODEL,
            "available_models": []
        }
```

**ä¼˜å…ˆçº§**: ä¸­ (ä¸å½±å“åŠŸèƒ½,ä½†æ•°æ®ä¸å‡†ç¡®)

---

## ğŸ“‹ å®Œæ•´ä¿®å¤æ­¥éª¤

### Phase 1: ä¿®å¤èŠå¤©å®¤è·¯ç”± (1-2å°æ—¶)
1. ä¿®æ”¹ `chatroom_ui/vite.config.js`,æ·»åŠ  `base: '/chatroom/'`
2. é‡æ–°æ„å»ºå‰ç«¯: `cd chatroom_ui && pnpm run build`
3. éªŒè¯ç”Ÿæˆçš„HTMLä¸­è·¯å¾„æ˜¯å¦æ­£ç¡®

### Phase 2: å®ç°Dashboard APIs (2-3å°æ—¶)
1. åœ¨admin_app.pyä¸­å®ç°4ä¸ªç¼ºå¤±çš„APIç«¯ç‚¹
2. ç¡®ä¿æ‰€æœ‰æ•°æ®æ¥è‡ªçœŸå®çš„Agent APIè°ƒç”¨,ä¸ä½¿ç”¨å‡æ•°æ®
3. æ·»åŠ é”™è¯¯å¤„ç†å’Œè¶…æ—¶æ§åˆ¶

### Phase 3: æ›´æ–°ç‰ˆæœ¬å· (å·²å®Œæˆ)
1. âœ… Dockerfile start.sh
2. âœ… dashboard.html

### Phase 4: æ„å»ºå’Œéƒ¨ç½²v6.3 (30-40åˆ†é’Ÿ)
1. æäº¤æ‰€æœ‰ä¿®æ”¹åˆ°Git
2. æ¨é€åˆ°GitHubè§¦å‘æ„å»º
3. ç­‰å¾…ARM64æ„å»ºå®Œæˆ
4. åœ¨M3ä¸Šéƒ¨ç½²æµ‹è¯•

### Phase 5: å…¨é¢æµ‹è¯• (30åˆ†é’Ÿ)
1. éªŒè¯èŠå¤©å®¤UIæ­£å¸¸åŠ è½½
2. éªŒè¯ç®¡ç†é¢æ¿æ‰€æœ‰æ•°æ®æ­£ç¡®æ˜¾ç¤º
3. éªŒè¯15åˆ†é’Ÿåå·¥å…·æ± æ— éœ€ä¸‹è½½æ¨¡å‹
4. éªŒè¯æ‰€æœ‰APIè¿”å›çœŸå®æ•°æ®

---

## ğŸ¯ v6.3æœ€ç»ˆç›®æ ‡

### åŠŸèƒ½å®Œæ•´æ€§
- âœ… æ‰€æœ‰15ä¸ªå·¥å…·å¯ç”¨
- âœ… æµè§ˆå™¨æ± æ­£å¸¸å·¥ä½œ
- âœ… èŠå¤©å®¤UIå®Œæ•´æ˜¾ç¤º
- âœ… ç®¡ç†é¢æ¿æ•°æ®å®Œæ•´

### æ€§èƒ½ä¼˜åŒ–
- âœ… æ‰€æœ‰æ¨¡å‹é¢„ä¸‹è½½(Whisper, OpenCV, EasyOCR)
- âœ… 15åˆ†é’Ÿå»¶è¿Ÿåˆå§‹åŒ–é¿å…å¯åŠ¨å†²çª
- âœ… æ— è¿è¡Œæ—¶æ¨¡å‹ä¸‹è½½

### æ•°æ®çœŸå®æ€§
- âœ… æ‰€æœ‰APIè¿”å›çœŸå®æ•°æ®
- âœ… ç®¡ç†é¢æ¿æ˜¾ç¤ºå®é™…çŠ¶æ€
- âœ… æ€§èƒ½æ•°æ®æ¥è‡ªçœŸå®æµ‹è¯•
- âŒ ä¸ä½¿ç”¨ä»»ä½•å‡æ•°æ®æˆ–å ä½ç¬¦

---

## ğŸ“ éƒ¨ç½²å‘½ä»¤ (v6.3)

```bash
# åœæ­¢æ—§å®¹å™¨
docker stop agent6 && docker rm agent6

# æ‹‰å–v6.3é•œåƒ
docker pull junpeng999/agent6:latest-arm64

# å¯åŠ¨v6.3 (æ³¨æ„ADMIN_PORTç¯å¢ƒå˜é‡)
docker run -d --name agent6 \
  -p 8888:8888 \
  -p 8889:8889 \
  -e LLM_BASE_URL="http://192.168.9.125:8000/v1" \
  -e LLM_MODEL="minimax/minimax-m2" \
  -e LLM_TEMPERATURE="0.7" \
  -e LLM_MAX_TOKENS="4096" \
  -e ADMIN_PORT="8889" \
  junpeng999/agent6:latest-arm64

# æŸ¥çœ‹å¯åŠ¨æ—¥å¿—
docker logs -f agent6
```

---

## ğŸ” æµ‹è¯•æ¸…å•

### å¯åŠ¨æµ‹è¯•
- [ ] å®¹å™¨æ­£å¸¸å¯åŠ¨,æ— é”™è¯¯æ—¥å¿—
- [ ] Agent API (8888) å¯è®¿é—®
- [ ] Admin Panel (8889) å¯è®¿é—®
- [ ] å¯åŠ¨æ—¥å¿—æ˜¾ç¤º"v6.3"

### 15åˆ†é’Ÿåæµ‹è¯•
- [ ] æµè§ˆå™¨æ± åˆå§‹åŒ–æˆåŠŸ
- [ ] å·¥å…·æ± åŠ è½½å®Œæˆ
- [ ] **æ— æ¨¡å‹ä¸‹è½½æ—¥å¿—** (å…³é”®!)
- [ ] `/health` ç«¯ç‚¹æ˜¾ç¤º15ä¸ªå·¥å…·

### ç®¡ç†é¢æ¿æµ‹è¯•
- [ ] ç³»ç»Ÿè¿è¡Œæ—¶é—´æ­£ç¡®æ˜¾ç¤º
- [ ] é¢„åŠ è½½çŠ¶æ€æ˜¾ç¤º"å·²å®Œæˆ"
- [ ] LLMæ¨¡å‹åˆ—è¡¨æ­£ç¡®æ˜¾ç¤º
- [ ] å·¥å…·æ•°é‡æ˜¾ç¤º15
- [ ] æ€§èƒ½æ•°æ®æ­£å¸¸æ›´æ–°

### èŠå¤©å®¤æµ‹è¯•
- [ ] é¡µé¢æ­£å¸¸åŠ è½½,æ— ç©ºç™½
- [ ] CSSæ ·å¼æ­£ç¡®åº”ç”¨
- [ ] JavaScriptåŠŸèƒ½æ­£å¸¸
- [ ] æ— 404é”™è¯¯

---

**åˆ›å»ºæ—¶é—´**: 2025-12-05 13:30 UTC
**ç‰ˆæœ¬**: v6.3.0-rc1
**çŠ¶æ€**: ä¿®å¤è¿›è¡Œä¸­
